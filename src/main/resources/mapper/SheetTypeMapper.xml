<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hero.ms.service.tree.mapper.SheetTypeMapper">
    <resultMap id="SheetTypeBaseResultMap" type="com.hero.ms.service.tree.entity.SheetType">
        <id column="CODE_ID" property="id" jdbcType="VARCHAR"/>
        <result column="CODE_NAME" property="name" jdbcType="VARCHAR"/>
        <result column="CODE_VALUE" property="codeValue" jdbcType="VARCHAR"/>
        <result column="PARENT_ID" property="parentId" jdbcType="VARCHAR"/>
        <result column="CODE_TYPE" property="codeType" jdbcType="VARCHAR"/>
        <result column="PRO_ID" property="proId" jdbcType="VARCHAR"/>
    </resultMap>

    <select id="findAll" resultMap="SheetTypeBaseResultMap">
		SELECT CODE_ID, CODE_NAME, CODE_VALUE, PARENT_ID, CODE_TYPE, PRO_ID FROM tbl_tynl_tree_code WHERE PRO_ID = #{proId} AND CODE_TYPE = #{codeType}
	</select>

    <select id="findRoot" resultMap="SheetTypeBaseResultMap">
		SELECT CODE_ID, CODE_NAME, CODE_VALUE, PARENT_ID, CODE_TYPE, PRO_ID FROM tbl_tynl_tree_code WHERE PRO_ID = #{proId} AND CODE_TYPE = #{codeType} AND PARENT_ID IS NULL
	</select>

    <select id="findChildren" resultMap="SheetTypeBaseResultMap">
		SELECT CODE_ID, CODE_NAME, CODE_VALUE, PARENT_ID, CODE_TYPE, PRO_ID FROM tbl_tynl_tree_code WHERE PRO_ID = #{proId} AND CODE_TYPE = #{codeType} AND PARENT_ID = #{parentId}
	</select>

    <select id="findByWord" resultMap="SheetTypeBaseResultMap">
		SELECT CODE_ID, CODE_NAME FROM tbl_tynl_tree_code WHERE CODE_NAME like concat('%', #{codeName}, '%') GROUP BY CODE_NAME
	</select>

</mapper>